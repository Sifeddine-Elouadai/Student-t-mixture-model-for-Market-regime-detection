# Method 2: Statistical Regime Detection Framework

A statistical framework for identifying market regimes based on Student-t mixture models and return distributions.

## Overview

Financial markets evolve through different statistical environments characterized by changes in volatility, tail risk, and return distributions. While economic or trend-based models describe directional incentives, they do not fully capture the distributional mechanics of returns. Method 2 is a statistical regime detection framework based on Student-t mixture models, designed to identify latent market states driven by changes in return distributions.

### Core Objective

> What type of statistical environment is the market currently operating in?

Specifically, it seeks to detect regimes that differ in:
- Volatility level
- Tail thickness (crash risk)
- Return dispersion

These regimes describe whether the market is:
- Calm or stressed
- Stable or unstable
- Symmetric or tail-dominated

## Why Statistical Regimes Matter

Markets are not Gaussian. Empirical return distributions exhibit:
- **Fat tails**: Extreme events occur more frequently than normal distribution predicts
- **Volatility clustering**: Volatile periods tend to persist
- **Regime persistence**: Statistical states endure over time

Traditional models assuming normality underestimate extreme risks. Therefore, regime detection must be based on distributional modeling rather than point estimates.

## Data and Feature Selection

### Underlying Asset
We use daily log-returns of the S&P 500 index as a proxy for aggregate market behavior because it:
- Reflects systemic risk
- Aggregates cross-sector information
- Is the dominant benchmark for global equity markets

### Return Computation
Returns are computed as:
r_t = ln(P_t / P_{t-1})

Returns are preferred over prices because they are stationary, reflect proportional changes, and enable distributional modeling.

## Why Mixture Models?

Markets do not follow a single distribution. Instead, returns are generated by a mixture of latent processes.

A mixture model assumes:
p(r_t) = Σ π_k · f_k(r_t) for k = 1 to K

Where:
- **π_k** is the probability of regime k
- **f_k** is the return distribution in regime k
- **Each regime** corresponds to a distinct statistical state

## Why Student-t Distributions?

The Student-t distribution is defined by:
f(r | μ, σ, ν)

Where:
- **μ** = mean return
- **σ** = scale (volatility)
- **ν** = degrees of freedom (tail thickness)

As ν → ∞, the Student-t converges to a Gaussian.

### Advantages
- Captures fat tails
- Models crash risk explicitly
- Adapts to calm and stressed environments

This makes Student-t mixtures superior to Gaussian mixtures for financial returns.

## Model Specification

We fit a K-component Student-t mixture model using Expectation-Maximization (EM). In this system:
K = 4

Corresponding to four interpretable regimes.

## The Four Regimes

Each regime is classified using:
- Mean return sign
- Volatility level
- Tail thickness

*Note: The original document does not provide explicit regime names, but the framework classifies regimes based on these statistical properties.*

## Regime Assignment and Confidence

For each day t, the model computes posterior probabilities:
P(z_t = k | r_t)

The regime is assigned as:
ẑ_t = argmax_k P(z_t = k)


Confidence is defined as:
Confidence_t = max_k P(z_t = k)


| Confidence Level | Interpretation |
|------------------|----------------|
| **High** | Clear statistical structure, stable regime membership |
| **Low** | Transition phases, mixed statistical signals |

## Why This Complements Method 1

| Method | Question Answered |
|--------|-------------------|
| **Method 1** | Does the market reward or punish risk? |
| **Method 2** | What is the statistical nature of risk today? |

Together:
- **Method 1** = economic incentives
- **Method 2** = risk mechanics

They are orthogonal and synergistic.

## Code Architecture

The implementation consists of five main files:
├── data_loader.py # Data acquisition and preprocessing
├── returns.py # Return computation
├── student_t_mixture.py # EM estimation for Student-t mixture
├── regime_classifier.py # Regime labeling and interpretation
└── run.py # Pipeline execution

### Module Descriptions

| Module | Description |
|--------|-------------|
| **data_loader.py** | Loads S&P 500 prices, cleans missing values, ensures consistent frequency |
| **returns.py** | Transforms prices into stationary log-returns required for mixture modeling |
| **student_t_mixture.py** | Fits a Student-t mixture using EM (E-step: estimate regime probabilities; M-step: update parameters) |
| **regime_classifier.py** | Labels regimes using empirical mean and volatility estimates for interpretability |
| **run.py** | Orchestrates the complete pipeline and generates outputs |

## Output Generation

For each date, the model produces:
- Assigned regime
- Confidence score
- Return realization

## Practical Use Cases

This method enables:

| Application | Description |
|-------------|-------------|
| **Volatility Targeting** | Adjust exposure based on prevailing volatility regime |
| **Drawdown Control** | Anticipate periods of extreme tail risk |
| **Risk Budgeting** | Allocate risk capital according to statistical environment |
| **Regime-Aware Asset Allocation** | Dynamically adjust portfolios based on market state |

> **Note**: This method does not generate trades. It provides risk context.

## Conclusion

Method 2 provides a statistically grounded, interpretable framework for identifying market regimes based on return distributions. By leveraging Student-t mixtures, it captures fat tails, regime persistence, and structural shifts in risk.

Combined with economic regime models (such as Method 1), it forms a robust foundation for market state intelligence.

---
